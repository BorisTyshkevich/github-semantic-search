<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GitHub Issue Search</title>
<style>
body{font-family:Arial,sans-serif;margin:40px;background:#f7f7f7;}
#results{margin-top:20px;}
.issue{padding:10px;border-bottom:1px solid #ddd;background:#fff;}
.issue a{font-weight:bold;text-decoration:none;color:#0366d6;}
</style>
</head>
<body>
<h1>GitHub Issue Search</h1>
<form id="searchForm">
<input type="text" id="query" placeholder="search text" size="40" required />
<label>State:<input type="text" id="state" placeholder="open"/></label>
<label>Labels:<input type="text" id="labels" placeholder="bug,performance"/></label>
<button type="submit">Search</button>
</form>
<div id="results"></div>
<script>
document.getElementById('searchForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const q = document.getElementById('query').value;
  const st = document.getElementById('state').value;
  const lbl = document.getElementById('labels').value;
  const params = new URLSearchParams({query:q,state:st,labels:lbl});
  const res = await fetch('/api/search?' + params.toString());
  const data = await res.json();
  const container = document.getElementById('results');
  container.innerHTML = '';
  data.forEach(item => {
    const div = document.createElement('div');
    div.className = 'issue';
    div.innerHTML = `<a href="https://github.com/ClickHouse/ClickHouse/issues/${item.Number}" target="_blank">#${item.Number}</a> ${item.Title}`;
    container.appendChild(div);
  });
});
</script>
</body>
</html>
